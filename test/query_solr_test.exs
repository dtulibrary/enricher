defmodule QuerySolrTest do
  use ExUnit.Case

  test "It queries solr" do
    response = QuerySolr.get_ids
    assert is_list(response)
  end

  test "parse_ids" do
    # resp_body = %{"responseHeader" => %{}},"response" => %{"numFound"=>1,"start"=>0,"docs"=>[%{"access_ss"=>["dtu"],"alert_timestamp_dt"=>"2015-10-22T12:11:49.278Z","isolanguage_ss"=>["eng"],"isolanguage_facet"=>["eng"],"publisher_ts"=>["Hindawi Publishing Corporation"],"member_id_ss"=>["308669036"],"title_ts"=>["Mature miR-184 and Squamous Cell Carcinoma of the Tongue"],"source_ss"=>["hindawi"],"format"=>"article","update_timestamp_dt"=>"2015-10-22T12=>11=>56.169Z","language_ss"=>["English"],"~merge_info_sf"=>"%{\"abstract_ts\"=>[\"(hindawi,*) / 308669036\"],\"author_sort\"=>[\"(hindawi,*) / 308669036\"],\"author_ts\"=>[\"(hindawi,*) / 308669036\"],\"cluster_id_ss\"=>[\"(hindawi,*) / 308669036\"],\"format\"=>[\"(hindawi,*) / 308669036\"],\"fulltext_list_ssf\"=>[\"(hindawi,*) / 308669036\"],\"isolanguage_ss\"=>[\"(hindawi,*) / 308669036\"],\"keywords_ts\"=>[\"(hindawi,*) / 308669036\"],\"language_ss\"=>[\"(hindawi,*) / 308669036\"],\"member_id_ss\"=>[\"(hindawi,*) / 308669036\"],\"pub_date_tis\"=>[\"(hindawi,*) / 308669036\"],\"pub_date_tsort\"=>[\"(hindawi,*) / 308669036\"],\"publisher_ts\"=>[\"(hindawi,*) / 308669036\"],\"source_ext_ss\"=>[\"(hindawi,*) / 308669036\"],\"source_id_ss\"=>[\"(hindawi,*) / 308669036\"],\"source_ss\"=>[\"(hindawi,*) / 308669036\"],\"source_type_ss\"=>[\"(hindawi,*) / 308669036\"],\"title_sort\"=>[\"(hindawi,*) / 308669036\"],\"title_ts\"=>[\"(hindawi,*) / 308669036\"]}","abstract_ts"=>["MicroRNAs (miRNAs) are a group of small noncoding RNAs (about 18â€“24 nucleotides in length) that function as post-transcriptional regulators in eukaryotic cells. miRNAs are differentially expressed in squamous cell carcinoma (SCC) of the tongue. We identified that mature miRNA-184 (miR-184) was overexpressed in tongue SCC cells in comparison to the paired normal epithelial tissues. In vitro inhibition of miR-184 levels could induce apoptosis and hinder proliferation of tongue SCC cells. Patients with tongue SCC have high plasma miR-184 levels. Plasma miR-184 was associated with the tumor load. Surgical removal of the primary tumor reduced plasma miR-184 levels significantly. The data suggested that miR-184 is linked to the pathogenesis of tongue SCC. Further studies are warranted to identify and evaluate miRNA-based serological markers for tongue SCC detection."],"pub_date_tis"=>[2009],"keywords_ts"=>["TSWJ=>9"],"keywords_facet"=>["TSWJ=>9"],"fulltext_availability_ss"=>["UNDETERMINED"],"cluster_id_ss"=>["184569862"],"source_id_ss"=>["hindawi=>oai=>hindawi.com=>10.1100/tsw.2009.12"],"author_ts"=>["Wong, Thian-Sze","Ho, Wai-Kuen","Chan, Jimmy Yu-Wai","Ng, Raymond Wai-Man","Wei, William Ignace"],"author_facet"=>["Wong, Thian-Sze","Ho, Wai-Kuen","Chan, Jimmy Yu-Wai","Ng, Raymond Wai-Man","Wei, William Ignace"],"source_ext_ss"=>["ds1=>hindawi"],"source_type_ss"=>["publisher"],"fulltext_list_ssf"=>["%{\"source\"=>\"hindawi\",\"local\"=>false,\"type\"=>\"publisher\",\"url\"=>\"http=>//dx.doi.org/10.1100/tsw.2009.12\"}"],"id"=>"1050","_version_"=>1535294314870996992}]}})
    # assert QuerySolr.parse_ids(resp_body) == ["184569862"]
  end
end
